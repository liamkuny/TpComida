{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useContext, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport axios from 'axios';\nimport { Input, Stack } from 'native-base';\nimport { ComidasContext } from \"../contextState.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    pass = _useState4[0],\n    setPass = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    error = _useState8[0],\n    setError = _useState8[1];\n  var context = useContext(ComidasContext);\n  function handleSubmit(email, password) {\n    var response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(!email || !password)) {\n            _context.next = 3;\n            break;\n          }\n          setError('Por favor, complete todos los campos.');\n          return _context.abrupt(\"return\");\n        case 3:\n          _context.prev = 3;\n          setLoading(true);\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(axios.post('http://challenge-react.alkemy.org/', {\n            body: {\n              email: email,\n              password: password\n            }\n          }));\n        case 7:\n          response = _context.sent;\n          setLoading(false);\n          if (!response.data || !response.data.token) {\n            setError('Credenciales inválidas');\n          } else {\n            context.setAuth(response.data.token);\n          }\n          _context.next = 16;\n          break;\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](3);\n          setLoading(false);\n          setError('Se produjo un error al iniciar sesión. Por favor, inténtalo de nuevo más tarde.');\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, null, null, [[3, 12]], Promise);\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(Stack, {\n      space: 4,\n      w: \"75%\",\n      maxW: \"300px\",\n      mx: \"auto\",\n      children: [_jsx(Text, {\n        fontWeight: \"bold\",\n        children: \"\\xA1Bienvenidos! Ingrese sus datos para Iniciar Sesi\\xF3n.\"\n      }), _jsx(Input, {\n        variant: \"filled\",\n        placeholder: \"Email\",\n        name: \"mail\",\n        onChangeText: setEmail\n      }), _jsx(Input, {\n        variant: \"filled\",\n        placeholder: \"Contrase\\xF1a\",\n        name: \"contrase\\xF1a\",\n        onChangeText: setPass,\n        secureTextEntry: true\n      }), error !== '' && _jsx(Text, {\n        style: styles.errorText,\n        children: error\n      })]\n    }), _jsx(Button, {\n      title: \"Ingresar\",\n      onPress: function _callee() {\n        return _regeneratorRuntime.async(function _callee$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              setError('');\n              handleSubmit(email, pass);\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, null, null, null, Promise);\n      },\n      disabled: loading\n    })]\n  });\n}\nvar styles = {\n  container: {\n    flex: 1,\n    marginVertical: 300,\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontWeight: 'bold'\n  },\n  errorText: {\n    color: 'red',\n    fontWeight: 'bold'\n  }\n};","map":{"version":3,"names":["React","useContext","useState","Text","View","Button","axios","Input","Stack","ComidasContext","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","pass","setPass","_useState5","_useState6","loading","setLoading","_useState7","_useState8","error","setError","context","handleSubmit","password","response","_regeneratorRuntime","async","handleSubmit$","_context","prev","next","abrupt","awrap","post","body","sent","data","token","setAuth","t0","stop","Promise","style","styles","container","children","space","w","maxW","mx","fontWeight","variant","placeholder","name","onChangeText","secureTextEntry","errorText","title","onPress","_callee","_callee$","_context2","disabled","flex","marginVertical","alignItems","justifyContent","color"],"sources":["C:/Users/devandroid/Desktop/BIEEN/TpComida/componentes/Login.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { Text, View, Button } from 'react-native';\r\nimport axios from 'axios';\r\nimport { Input, Stack } from 'native-base';\r\nimport { ComidasContext } from '../contextState.js';\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [pass, setPass] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const context = useContext(ComidasContext);\r\n\r\n  async function handleSubmit(email, password) {\r\n    if (!email || !password) {\r\n      setError('Por favor, complete todos los campos.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const response = await axios.post('http://challenge-react.alkemy.org/', {\r\n        body:{\r\n        email: email,\r\n        password: password}\r\n      });\r\n\r\n      setLoading(false);\r\n\r\n      if (!response.data || !response.data.token) {\r\n        setError('Credenciales inválidas');\r\n        \r\n      } else {\r\n        context.setAuth(response.data.token);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError('Se produjo un error al iniciar sesión. Por favor, inténtalo de nuevo más tarde.');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Stack space={4} w=\"75%\" maxW=\"300px\" mx=\"auto\">\r\n        <Text fontWeight=\"bold\">\r\n          ¡Bienvenidos! Ingrese sus datos para Iniciar Sesión.\r\n        </Text>\r\n        <Input variant=\"filled\" placeholder=\"Email\" name=\"mail\" onChangeText={setEmail} />\r\n        <Input\r\n          variant=\"filled\"\r\n          placeholder=\"Contraseña\"\r\n          name=\"contraseña\"\r\n          onChangeText={setPass}\r\n          secureTextEntry={true}\r\n        />\r\n        {error !== '' && <Text style={styles.errorText}>{error}</Text>}\r\n      </Stack>\r\n      <Button\r\n        title=\"Ingresar\"\r\n        onPress={async () => {\r\n          setError(''); // Limpiar el mensaje de error antes de intentar el inicio de sesión nuevamente\r\n          handleSubmit(email, pass);\r\n        }}\r\n        disabled={loading}\r\n      />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    flex: 1,\r\n    marginVertical: 300,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontWeight: 'bold',\r\n  },\r\n  errorText: {\r\n    color: 'red',\r\n    fontWeight: 'bold',\r\n  },\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}