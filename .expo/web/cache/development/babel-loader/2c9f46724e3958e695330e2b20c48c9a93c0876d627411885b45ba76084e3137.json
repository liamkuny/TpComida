{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useContext, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport axios from 'axios';\nimport { Input, Stack } from 'native-base';\nimport { ComidasContext } from \"../contextState.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    pass = _useState4[0],\n    setPass = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var context = useContext(ComidasContext);\n  function handleSubmit(email, password) {\n    var response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(!email || !password)) {\n            _context.next = 3;\n            break;\n          }\n          alert('Error', 'Por favor, complete todos los campos.');\n          return _context.abrupt(\"return\");\n        case 3:\n          _context.prev = 3;\n          setLoading(true);\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(axios.post('http://challenge-react.alkemy.org/', {\n            email: email,\n            password: password\n          }));\n        case 7:\n          response = _context.sent;\n          setLoading(false);\n          if (response.data && response.data.token) {\n            context.setAuth(response.data.token);\n          } else {\n            context.setAuth(\"\");\n            alert('Error', 'Credenciales inválidas');\n          }\n          _context.next = 16;\n          break;\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](3);\n          setLoading(false);\n          alert('Error', 'Se produjo un error al iniciar sesión. Por favor, inténtalo de nuevo más tarde.');\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, null, null, [[3, 12]], Promise);\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(Stack, {\n      space: 4,\n      w: \"75%\",\n      maxW: \"300px\",\n      mx: \"auto\",\n      children: [_jsx(Text, {\n        fontWeight: \"bold\",\n        children: \"\\xA1Bienvenidos! Ingrese sus datos para Iniciar Sesion.\"\n      }), _jsx(Input, {\n        variant: \"filled\",\n        placeholder: \"Email\",\n        name: \"mail\",\n        onChangeText: setEmail\n      }), _jsx(Input, {\n        variant: \"filled\",\n        placeholder: \"Contrase\\xF1a\",\n        name: \"contrase\\xF1a\",\n        onChangeText: setPass,\n        secureTextEntry: true\n      })]\n    }), _jsx(Button, {\n      title: \"Ingresar\",\n      onPress: function _callee() {\n        return _regeneratorRuntime.async(function _callee$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              handleSubmit(email, pass);\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, null, null, null, Promise);\n      },\n      disabled: loading\n    })]\n  });\n}\nvar styles = {\n  container: {\n    flex: 1,\n    marginVertical: 300,\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontWeight: 'bold'\n  }\n};","map":{"version":3,"names":["React","useContext","useState","Text","View","Button","axios","Input","Stack","ComidasContext","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","pass","setPass","_useState5","_useState6","loading","setLoading","context","handleSubmit","password","response","_regeneratorRuntime","async","handleSubmit$","_context","prev","next","alert","abrupt","awrap","post","sent","data","token","setAuth","t0","stop","Promise","style","styles","container","children","space","w","maxW","mx","fontWeight","variant","placeholder","name","onChangeText","secureTextEntry","title","onPress","_callee","_callee$","_context2","disabled","flex","marginVertical","alignItems","justifyContent"],"sources":["C:/Users/devandroid/Desktop/BIEEN/TpComida/componentes/Login.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { Text, View, Button} from 'react-native';\r\nimport axios from 'axios';\r\nimport { Input, Stack } from 'native-base';\r\nimport { ComidasContext } from \"../contextState.js\";\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [pass, setPass] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const context = useContext(ComidasContext);\r\n  \r\n  async function handleSubmit(email, password) {\r\n    if (!email || !password) {\r\n      alert('Error', 'Por favor, complete todos los campos.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const response = await axios.post('http://challenge-react.alkemy.org/', {\r\n        email: email,\r\n        password: password,\r\n      });\r\n\r\n      setLoading(false);\r\n\r\n      if (response.data && response.data.token) {\r\n       \r\n        context.setAuth(response.data.token);\r\n      } else {\r\n        context.setAuth(\"\");\r\n        alert('Error', 'Credenciales inválidas');\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      \r\n      alert('Error', 'Se produjo un error al iniciar sesión. Por favor, inténtalo de nuevo más tarde.');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Stack space={4} w=\"75%\" maxW=\"300px\" mx=\"auto\">\r\n        <Text fontWeight=\"bold\">¡Bienvenidos! Ingrese sus datos para Iniciar Sesion.</Text>\r\n        <Input variant=\"filled\" placeholder=\"Email\" name=\"mail\" onChangeText={setEmail} />\r\n        <Input variant=\"filled\" placeholder=\"Contraseña\" name=\"contraseña\" onChangeText={setPass} secureTextEntry={true} />\r\n      </Stack>\r\n      <Button\r\n        title=\"Ingresar\"\r\n        onPress={async () => {\r\n          handleSubmit(email, pass);\r\n        }}\r\n        disabled={loading} \r\n      />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    flex: 1,\r\n    marginVertical: 300,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontWeight: 'bold',\r\n  },\r\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,MAAA;AAEpD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,EAAEC,KAAK,QAAQ,aAAa;AAC1C,SAASC,cAAc;AAA6B,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEpD,eAAe,SAASC,KAAKA,CAAA,EAAG;EAC9B,IAAAC,SAAA,GAA0Bb,QAAQ,CAAC,EAAE,CAAC;IAAAc,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAAI,UAAA,GAAwBlB,QAAQ,CAAC,EAAE,CAAC;IAAAmB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA7BE,IAAI,GAAAD,UAAA;IAAEE,OAAO,GAAAF,UAAA;EACpB,IAAAG,UAAA,GAA8BtB,QAAQ,CAAC,KAAK,CAAC;IAAAuB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAAtCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1B,IAAMG,OAAO,GAAG3B,UAAU,CAACQ,cAAc,CAAC;EAE1C,SAAeoB,YAAYA,CAACX,KAAK,EAAEY,QAAQ;IAAA,IAAAC,QAAA;IAAA,OAAAC,mBAAA,CAAAC,KAAA,UAAAC,cAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,MACrC,CAACnB,KAAK,IAAI,CAACY,QAAQ;YAAAK,QAAA,CAAAE,IAAA;YAAA;UAAA;UACrBC,KAAK,CAAC,OAAO,EAAE,uCAAuC,CAAC;UAAC,OAAAH,QAAA,CAAAI,MAAA;QAAA;UAAAJ,QAAA,CAAAC,IAAA;UAKxDT,UAAU,CAAC,IAAI,CAAC;UAACQ,QAAA,CAAAE,IAAA;UAAA,OAAAL,mBAAA,CAAAQ,KAAA,CAEMlC,KAAK,CAACmC,IAAI,CAAC,oCAAoC,EAAE;YACtEvB,KAAK,EAAEA,KAAK;YACZY,QAAQ,EAAEA;UACZ,CAAC,CAAC;QAAA;UAHIC,QAAQ,GAAAI,QAAA,CAAAO,IAAA;UAKdf,UAAU,CAAC,KAAK,CAAC;UAEjB,IAAII,QAAQ,CAACY,IAAI,IAAIZ,QAAQ,CAACY,IAAI,CAACC,KAAK,EAAE;YAExChB,OAAO,CAACiB,OAAO,CAACd,QAAQ,CAACY,IAAI,CAACC,KAAK,CAAC;UACtC,CAAC,MAAM;YACLhB,OAAO,CAACiB,OAAO,CAAC,EAAE,CAAC;YACnBP,KAAK,CAAC,OAAO,EAAE,wBAAwB,CAAC;UAC1C;UAACH,QAAA,CAAAE,IAAA;UAAA;QAAA;UAAAF,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;UAEDR,UAAU,CAAC,KAAK,CAAC;UAEjBW,KAAK,CAAC,OAAO,EAAE,iFAAiF,CAAC;QAAC;QAAA;UAAA,OAAAH,QAAA,CAAAY,IAAA;MAAA;IAAA,0BAAAC,OAAA;EAAA;EAItG,OACEnC,KAAA,CAACT,IAAI;IAAC6C,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,GAC5BvC,KAAA,CAACL,KAAK;MAAC6C,KAAK,EAAE,CAAE;MAACC,CAAC,EAAC,KAAK;MAACC,IAAI,EAAC,OAAO;MAACC,EAAE,EAAC,MAAM;MAAAJ,QAAA,GAC7CzC,IAAA,CAACR,IAAI;QAACsD,UAAU,EAAC,MAAM;QAAAL,QAAA,EAAC;MAAoD,CAAM,CAAC,EACnFzC,IAAA,CAACJ,KAAK;QAACmD,OAAO,EAAC,QAAQ;QAACC,WAAW,EAAC,OAAO;QAACC,IAAI,EAAC,MAAM;QAACC,YAAY,EAAE1C;MAAS,CAAE,CAAC,EAClFR,IAAA,CAACJ,KAAK;QAACmD,OAAO,EAAC,QAAQ;QAACC,WAAW,EAAC,eAAY;QAACC,IAAI,EAAC,eAAY;QAACC,YAAY,EAAEtC,OAAQ;QAACuC,eAAe,EAAE;MAAK,CAAE,CAAC;IAAA,CAC9G,CAAC,EACRnD,IAAA,CAACN,MAAM;MACL0D,KAAK,EAAC,UAAU;MAChBC,OAAO,EAAE,SAAAC,QAAA;QAAA,OAAAjC,mBAAA,CAAAC,KAAA,UAAAiC,SAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAA/B,IAAA,GAAA+B,SAAA,CAAA9B,IAAA;YAAA;cACPR,YAAY,CAACX,KAAK,EAAEI,IAAI,CAAC;YAAC;YAAA;cAAA,OAAA6C,SAAA,CAAApB,IAAA;UAAA;QAAA,qBAAAC,OAAA;MAAA,CAC1B;MACFoB,QAAQ,EAAE1C;IAAQ,CACnB,CAAC;EAAA,CACE,CAAC;AAEX;AAEA,IAAMwB,MAAM,GAAG;EACbC,SAAS,EAAE;IACTkB,IAAI,EAAE,CAAC;IACPC,cAAc,EAAE,GAAG;IACnBC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE,QAAQ;IACxBf,UAAU,EAAE;EACd;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}